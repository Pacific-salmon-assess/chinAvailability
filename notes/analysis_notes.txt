Notes for Chinook availability project

Feb. 16, 2022
- Considerable variation in stock composition among areas within region, as well as variation in temporal sampling coverage (see figs/data_coverage/ directory). Ideally model with hierarchical GAMs. Alternatively consider restratifying to "subregions" using cluster analysis.
- Coverage at beginning/end of the year very sparse; consider truncating to March-Sep for SSoG and JdFS if convergence issues pronounced
- Issues with estimating abundance at year end; restrict catch data to be only in peak periods (non-cyclic); similarly for GSI, fit model to full dataset but constrain predictions to months with catch data


Feb. 17, 2022
- Why does fit random = FALSE still produce interannual variability in predictions?
- Switch model from summing aggregates to flexibly producing predictions based on minimum scale of data (original is negbin_rsplines_dirichlet_mvn_cumsum)
- Issues with negbin component when generating area predictions


Feb. 18, 2022
- Confirmed negbin component functional with areas; bug due to double-logging predictions; remember moderate differences between mgcv expected due to RIs being fit
- Rediscovered issue where convergence fails when fixed effects used as inits; adjust model_fit function accordingly


March 20, 2022
- For now use random intercepts by area and random smooths by region for dirichlet component (hierarchical smooths failed to converge); details in dirichlet_explore.R
- Composition component may require pooling less common stocks for convergence (see dirichlet_explore.R)
- Compositon fits look reasonable (note that predictions include a subset of data and are influenced by full dataset, hence why full 12 month cycle can be estimated)

March 28, 2022 
- Shift development to cam-dev branch of stockseasonr

March 31, 2022
- Removed Jan/Nov/Dec data and switched composition component to agg ~ area + s(month_n, bs = "tp", k = 4, by = reg, m = 2); alternatives that used hierarchical smooths for area or include bs = "cc" were unstable
- Simplify integrated model to include single set of predictions for composition and abundance portion of the model; save original formulation and utility functions as "integrated_stock_composition_EXPANDED.R" and "negbin_rsplines_dirichlet_MVN_EXPANDED.cpp"
	- TO RESOLVE: bugs in fit.R (first up parse_smoothers in utils.R)